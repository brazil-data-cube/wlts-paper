---
output: github_document
---

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)

Title <- "A plataform for land use and land cover data integration and trajectory analysis"
```

# A plataform for land use and land cover data integration and trajectory analysis

[![rc](https://img.shields.io/badge/research%20compendium-ready-brightgreen)](#)
[![Binder](https://mybinder.org/badge_logo.svg)](https://mybinder.org/v2/gh/M3nin0/wlts-compendium/HEAD)

This repository is a `Research Compendium` (RC), with all the materials (Codes, data, and computational environment) necessary for the reproduction and evaluation of the results presented in the article:

> Zioti *et al*, (2021). `A plataform for land use and land cover data integration and trajectory analysis`. International Journal of Applied Earth Observation and Geoinformation
 (2021).
 
## Compendium content

  - [:file\_folder: analysis/scripts/](analysis/scripts/): The directory with the scripts used to produce the examples of platforms usage and the case study. Since two programming languages, R and Python, were used, there are two subdirectories in this directory, one for each programming language.

  - [:file\_folder: analysis/data/](analysis/data/): Directory that stores the data that was used/produced while the research development. In this directory, there are two subdirectories:

    - [:file\_folder: analysis/data/raw_data](analysis/data/raw_data): Directory with the input data for the scripts. Note that in addition to this data, some of the data used in the paper was also collected from the online platform developed in the paper. To aid reproducibility and to allow others to evaluate the results, all data retrieved from the platform has been saved;
    
    - [:file\_folder: analysis/data/derived_data](analysis/data/derived_data): Directory with the data generated by running the scripts. This directory includes processed data, plots, and even data retrieved from the platform proposed in the article.
    
In addition to these directories, a few other files have been added to this RC to aid in the reproducibility of the results:

- `Dockerfile`: File with all the instructions needed to build the environment used to execute the scripts provided in this RC. The environment specified in this file has a [Jupyter Lab](https://jupyterlab.readthedocs.io/en/stable/) that allows editing and interactive execution of the generated code;
- `docker-compose.yml`: File that facilitates the creation and use of the computing environment provided in the `Dockerfile`;
- `Makefile`: File with shortcuts that allow you to perform the tasks required to reproduce this work easily. The following operations are available in this file:
  - `compose-build`: Command to build the Docker Image of the environment needed to run the code;
  - `compose-up`: Command to start the computational environment for code execution;
  - `compose`: Command to build and run at once.

## Running

In this section, the way the code in this RC can be executed is presented. The alternative to performing each of the steps is the `Makefile` file available in this RC. In this file, the compose operation is available, which performs all the steps presented below for the configuration of the environment necessary for executing the codes. The use of the `Makefile`, can be done in a terminal, inside this RC, with the following command:

```{sh, eval=FALSE}
make compose
```

To reproduce the results, it is necessary to configure the computational environment where the codes will be executed, for which at least two approaches can be used. In the first one, the environment is built using the `Dockerfile`.  

> The steps presented below assume that the user has installed the [Docker](https://www.docker.com/) and [Docker Compose](https://docs.docker.com/compose/) tools. If you have not installed them, please refer to the official documentation for each of these tools:

>  1. [Install Docker Engine](https://docs.docker.com/engine/install/);
>  2. [Install Docker Compose](https://docs.docker.com/compose/install/).

To build the environment, in a terminal, use the following `Docker Compose` command:

```{sh, eval=FALSE}
docker-compose build --no-cache

#> Building with native build. Learn about native build in Compose here: https://docs.docker.com/go/compose-native-build/
#> Building wlts-paper-environment
#> ... (Omitted)
#> Removing intermediate container f5e8ec885700
#> ---> b9bdc015280d
#> Successfully built b9bdc015280d
#> Successfully tagged wlts-paper-environment:0.1
```

An alternative is to use the `compose-build` operation available in the `Makefile` of this RC:

```{sh, eval=FALSE}
make compose-build
```

In both commands, the Docker Image that will be used was built. With the image generated, you can run it. For example, to do this with `Docker Compose`, use the following command:

```{sh, eval=FALSE}
docker-compose up

#> ... (Omitted)
#> wlts-paper-environment-container |         http://6d8cc29ce16c:8888/lab?token=34f53953650472abf5aaecd040ac85b68992ef470a74bcc8
#> wlts-paper-environment-container |      or http://127.0.0.1:8888/lab?token=34f53953650472abf5aaecd040ac85b68992ef470a74bcc8
```

The same process can be done with the `Makefile`:

```{sh, eval=FALSE}
make compose-up
```

Once this is done, it will be necessary to access the address (with the token) shown in the command output. For example, in this case, using the output of the above command, the following address can be accessed in the browser:

```{sh, eval=FALSE}
firefox http://127.0.0.1:8888/lab?token=34f53953650472abf5aaecd040ac85b68992ef470a74bcc8
```

Once you access this address in your browser, a Jupyter Lab environment will be available, ready for executing the code in this RC. To start executing and exploring the available code, go to the `wlts-article` directory, which contains all the content of this CR, following the organizational structure presented above.

### Licenses

**Code :** [MIT](LICENSE);

**Data :** [CC-0](http://creativecommons.org/publicdomain/zero/1.0/);

**Text and figures:** [CC-BY-4.0](http://creativecommons.org/licenses/by/4.0/);
